# Шаблон сбора информации для создания парсеров

## Базовые данные
- **Сайт**: `FlukeShop`
- **Base URL**: `https://flukeshop.ru/`
- **Имя парсера** (snake_case): `flukeshop`

---

## 1. Поиск товаров

**URL паттерн:**
```
https://flukeshop.ru/search?search={query}
```

**Кодирование:**
- [x] `urllib.parse.quote()` (пробелы → `%20`)
- [ ] Замена пробелов на `+`
- [ ] Другое: `_________________`

**ВАЖНО - Особенность поиска:**
- Поиск НЕ работает с запятыми и дополнительными словами
- ❌ НЕ работает: `"Fluke TiX501, тепловизор"` 
- ✅ Работает: `"Fluke TiX501"`
- **Нужно нормализовать запрос:** убрать запятые, оставить только основное название

**Тестовый URL:**
- Товар: `fluke tis60 тепловизор`
- URL: `https://flukeshop.ru/search?search=fluke%20tis60%20%D1%82%D0%B5%D0%BF%D0%BB%D0%BE%D0%B2%D0%B8%D0%B7%D0%BE%D1%80`

---

## 2. CSS Селекторы

**Контейнер результатов:**
```css
div#products.product-grid > div.products-block > div.row.products-row > div.product-col
```

**Элемент товара:**
```css
div.product-block.item-default
```

**Название:**
```css
h3.name a
```
Или для модели: `h3.name span.product_title_model`

**Цена:**
```css
div.price span.price-new
```

**Ссылка:**
```css
h3.name a
```
Или: `div.block-img a.img`

**HTML пример товара:**
```html
<div class="product-block item-default clearfix">
  <div class="product-meta">
    <h3 class="name">
      <a href="https://flukeshop.ru/teplovizory/teplovizoryu/teplovizor-fluke-tis60plus">
        Тепловизор <br>
        <span class="product_title_model">Fluke TiS60+</span>
      </a>
    </h3>
    <div class="price">
      <span class="price-new">1 058 992 р.</span>
    </div>
  </div>
</div>
```

---

## 3. Цена

**Формат:**
- [x] `1 058 992 р.` (пробелы как разделители тысяч, "р." вместо "₽")
- [ ] `1000.00 ₽` (точка)
- [ ] `1,000 ₽` (запятая)
- [ ] Другое: `_________________`

**Примеры:**
- `1 058 992 р.` (с ценой)
- `По запросу` (без цены)

**Особые случаи:**
- Диапазон цен: `_________________` → брать: `_________________`
- "По запросу": текст `По запросу`
- "Снят": текст `_________________` (не обнаружено в примерах)

---

## 4. Страница товара

- [x] Цена в результатах поиска
- [ ] Нужен переход на страницу товара

**Если нужна страница:**
- Селектор цены: `_________________`
- Селектор названия: `_________________`

---

## 5. Выбор товара

**Критерии:**
- [ ] Точное совпадение названия
- [ ] Совпадение артикула
- [x] Частичное совпадение (поиск работает по части названия)

**Приоритет:**
1. С ценой > "по запросу" > "снят"
2. Точное > частичное

---

## 6. Технические настройки

**Рекомендуемые значения:**
- `timeout`: `18-20` сек
- `request_delay`: `0.8-1.0` сек
- `max_concurrent`: `4-6`
- `batch_delay`: `4-5` сек

**Особенности:**
- Поиск чувствителен к запятым и лишним словам - нужна нормализация запроса
- Цена отображается в формате "1 058 992 р." (пробелы, "р." вместо "₽")

---

## 7. Тестовые товары

1. `Fluke TiS60+` → цена: `1 058 992 р.`
2. `Fluke TiS60` → цена: `По запросу`
3. `Fluke TiX501` → цена: `_________________`
4. "По запросу": `Fluke TiS60`
5. "Снят": `_________________`
6. Не найден: `_________________`

**Примечание:** Для тестирования использовать только основное название без запятых и дополнительных слов

---

## 8. Конфигурация config.yaml

```yaml
parser:
  flukeshop:
    enabled: true
    base_url: "https://flukeshop.ru/"
    async:
      enabled: true
      max_concurrent: 4-6
      request_delay: 0.8-1.0
      batch_size: 20-30
      batch_delay: 4-5
    timeout: 18-20
    user_agent: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
```

---

## Чеклист готовности

- [x] Base URL
- [x] URL паттерн поиска
- [x] Селектор контейнера
- [x] Селектор товара
- [x] Селектор названия
- [x] Селектор цены
- [x] Селектор ссылки
- [x] Формат цены
- [x] Статусы ("по запросу", "снят")
- [x] Тестовые товары
- [x] Конфигурация

**Готово к реализации!** ✅

## Дополнительные заметки

**Особенности нормализации запроса:**
- Убрать запятые из названия товара
- Убрать дополнительные слова после запятой (например, "тепловизор", "мультиметр")
- Оставить только основное название модели
- Пример: `"Fluke TiX501, тепловизор"` → `"Fluke TiX501"`

