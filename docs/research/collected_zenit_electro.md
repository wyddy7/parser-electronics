# Шаблон сбора информации для создания парсеров

## Базовые данные
- **Сайт**: `Зенит-Электро`
- **Base URL**: `https://www.zenit-electro.ru/`
- **Имя парсера** (snake_case): `zenit_electro`

---

## 1. Поиск товаров

**URL паттерн:**
```
https://www.zenit-electro.ru/component/finder/search.html?q={query}&Search=
```

**Кодирование:**
- [ ] `urllib.parse.quote()` (пробелы → `%20`)
- [x] Замена пробелов на `+` (пробелы → `+`)
- [ ] Другое: `_________________`

**ВАЖНО - Особенность:**
- Цены НЕТ в результатах поиска
- Нужен переход на страницу товара для получения цены (2 запроса: поиск + страница)
- Аналогично prist.ru

**Тестовый URL:**
- Товар: `ЭС0212 омметр`
- URL: `https://www.zenit-electro.ru/component/finder/search.html?q=ЭС0212+омметр&Search=`

---

## 2. CSS Селекторы

**Контейнер результатов:**
```css
ul#search-result-list.search-results
```

**Элемент товара:**
```css
ul#search-result-list > li
```

**Название (в результатах поиска):**
```css
h4.result-title a
```

**Ссылка (в результатах поиска):**
```css
h4.result-title a
```
Атрибут `href` содержит ссылку на страницу товара

**HTML пример товара из результатов поиска:**
```html
<li>
  <h4 class="result-title">
    <a href="/catalog/ommetry-milliommetry-mikroommetry/es0212-ommetr.html">
      ЭС0212 омметр
    </a>
  </h4>
  <p class="result-text">
    Описание товара...
  </p>
</li>
```

---

## 3. Цена

**ВАЖНО:** Цена находится ТОЛЬКО на странице товара, не в результатах поиска!

**Формат:**
- [ ] `1 000 ₽` (пробелы)
- [x] `23500 ₽` (без пробелов в числе, символ "₽")
- [ ] `1000.00 ₽` (точка)
- [ ] `1,000 ₽` (запятая)
- [ ] Другое: `_________________`

**Примеры:**
- `23500 ₽ (с НДС)` - на странице товара
- `20445 ₽ (без НДС)` - альтернативная цена без НДС
- Брать цену с НДС (первая)

**Особые случаи:**
- Диапазон цен: `_________________` → брать: `_________________`
- "По запросу": текст `_________________` (не обнаружено, все товары с ценой)
- "Снят": текст `_________________` (не обнаружено)

---

## 4. Страница товара

- [ ] Цена в результатах поиска
- [x] Нужен переход на страницу товара

**Селекторы на странице товара:**
- Селектор цены: `span#block_price` (текст: `23500 ₽ (с НДС)`)
- Селектор названия: `h1[itemprop="name"]`
- Формат цены: извлекать число из текста `23500 ₽ (с НДС)` → `23500`

---

## 5. Выбор товара

**Критерии:**
- [ ] Точное совпадение названия
- [ ] Совпадение артикула
- [x] Частичное совпадение (поиск работает по части названия)

**Приоритет:**
1. Все товары с ценой (нет "по запросу" или "снят")
2. Точное > частичное

---

## 6. Технические настройки

**Рекомендуемые значения:**
- `timeout`: `20` сек (2 запроса на товар: поиск + страница)
- `request_delay`: `1.0` сек
- `max_concurrent`: `4` (меньше, т.к. 2 запроса на товар)
- `batch_delay`: `5` сек

**Особенности:**
- 2 запроса на товар: поиск → получение ссылки → страница товара → получение цены
- Аналогично prist.ru по структуре
- Все товары имеют цену (нет статусов "по запросу" или "снят")

---

## 7. Тестовые товары

1. `ЭС0212 омметр` → цена: `23500 ₽`
2. `С1-64 Осциллограф` → цена: `_________________`
3. `В7-16А` → цена: `_________________`
4. "По запросу": `_________________` (не обнаружено)
5. "Снят": `_________________` (не обнаружено)
6. Не найден: `АКИП-1114 источник питания` (безуспешный поиск)

---

## 8. Конфигурация config.yaml

```yaml
parser:
  zenit_electro:
    enabled: true
    base_url: "https://www.zenit-electro.ru/"
    async:
      enabled: true
      max_concurrent: 4
      request_delay: 1.0
      batch_size: 20
      batch_delay: 5
    timeout: 20
    user_agent: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"
```

---

## Чеклист готовности

- [x] Base URL
- [x] URL паттерн поиска
- [x] Селектор контейнера
- [x] Селектор товара
- [x] Селектор названия (в результатах поиска)
- [x] Селектор цены (на странице товара)
- [x] Селектор ссылки (в результатах поиска)
- [x] Формат цены
- [x] Статусы ("по запросу", "снят") - не обнаружено, все товары с ценой
- [x] Тестовые товары
- [x] Конфигурация

**Готово к реализации!** ✅

## Дополнительные заметки

**Алгоритм парсинга (2 запроса на товар):**
1. Поиск товара → получение списка результатов
2. Извлечение ссылки на товар из `h4.result-title a[href]`
3. Переход на страницу товара
4. Извлечение цены из `span#block_price` (текст: `23500 ₽ (с НДС)`)
5. Извлечение названия из `h1[itemprop="name"]`

**Обработка цены:**
- Текст: `23500 ₽ (с НДС)` или `20445 ₽ (без НДС)`
- Брать цену с НДС (первая)
- Извлекать число: `23500`

